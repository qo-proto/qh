# QH - Header Static Table

QH uses a **static header table** that maps single-byte IDs to either complete header key-value pairs or header names.

For detailed header format specifications, see [Section 6.1 - Header Format](./protocol-definition.md#61-header-format) in the protocol definition.

The tables below were generated by analyzing actual Internet traffic in 2025. Some were filtered out such as unsupported and non-standard values. Due to this methodology, some of the entries may be inconsistent or appear multiple times with similar but not identical values. The order of the entries is optimized to encode the most common header fields with the smallest number of bytes.

## Header ID Space Allocation

```
0x00           = Custom header (key and value both transmitted)
0x01 - 0xN    = Complete key-value pairs
0xN+1 - 0xFF    = Header names only (value transmitted separately)
```

## Header Formats Summary

QH uses three header formats:

1. **Complete pairs (x01-0xN)**: Single byte → `\0x06` = `Content-Type: application/json; charset=UTF-8`
2. **Name + value (0xN+1-0xFF)**: ID + varint length + value → `\0x8F \x0A 1758784800` = `Date: 1758784800`
3. **Custom (0x00)**: Full key and value → `\x00 \x0C X-Request-ID \x06 abc123` = `X-Request-ID: abc123`

### Static Table - Request Headers

See the complete table in [static-tables.md](./static-tables.md#request-headers).

### Static Table - Response Headers

See the complete table in [static-tables.md](./static-tables.md#response-headers).

## Content Type Codes

When using numeric content type codes (for custom Content-Type values):

| Code | MIME Type                | Description          | Common Use       |
| ---- | ------------------------ | -------------------- | ---------------- |
| 0    | custom                   | Custom type          | Rare             |
| 1    | text/plain               | Plain text           | Text responses   |
| 2    | application/json         | JSON data            | API responses    |
| 3    | text/html                | HTML markup          | Web pages        |
| 4    | application/octet-stream | Binary data          | Files, downloads |
| 5-15 | (reserved)               | Future content types |                  |

## Custom Headers (0x00)

For headers not in the static table:

**Wire format:** `\x00 <varint:keyLen> <key> <varint:valueLen> <value>`

**Example:**

```
Header: X-Request-ID: abc123

Wire: \x00 \x0C X-Request-ID \x06 abc123

Breakdown:
- \x00: Custom header indicator
- \x0C: Key length (12 bytes)
- X-Request-ID: Key name
- \x06: Value length (6 bytes)
- abc123: Value

Total: 21 bytes
```

## Efficiency Comparison

| Format        | Example                          | Wire Size |
| ------------- | -------------------------------- | --------- |
| Complete pair | `Content-Type: application/json` | 1 byte    |
| Name + value  | `Date: 1758784800`               | 12 bytes  |
| Custom        | `X-Request-ID: abc123`           | 21 bytes  |

## Payment Protocol Support (x402)

QH supports the [x402 payment protocol](https://github.com/coinbase/x402).

**Required components:**

- `X-Payment` Request header
- `X-Payment-Response` Response header
- `402 Payment Required` Status code

**Flow:**

1. Client requests → Server responds 402 with payment requirements
2. Client sends payment via `X-Payment` header
3. Server validates and returns resource with `X-Payment-Response`

For details: [x402 repository](https://github.com/coinbase/x402) | [ecosystem](https://x402.org/ecosystem)
